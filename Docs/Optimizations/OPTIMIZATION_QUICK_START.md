# üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò APK

## üìã –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

**–ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω**: `Docs/APK_OPTIMIZATION_PLAN.md`  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~2 —á–∞—Å–∞  
**–û–∂–∏–¥–∞–µ–º–∞—è —ç–∫–æ–Ω–æ–º–∏—è**: 30-50% —Ä–∞–∑–º–µ—Ä–∞ APK

---

## ‚ö° –¢–û–ü-5 –ë–´–°–¢–†–´–• –ü–û–ë–ï–î (30 –º–∏–Ω—É—Ç, ~10-15 MB)

### 1Ô∏è‚É£ –£–¥–∞–ª–µ–Ω–∏–µ –º—É—Å–æ—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (5 –º–∏–Ω—É—Ç)
```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
rm 1.txt compile_test.kt test_compilation.kt logo.png

# –£–¥–∞–ª–µ–Ω–∏–µ design_reference
rm -rf app/src/design_reference/
```

### 2Ô∏è‚É£ –£–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö Developer Mode —Ñ–∞–π–ª–æ–≤ (3 –º–∏–Ω—É—Ç—ã)
```bash
rm -rf app/src/main/java/com/adygyes/app/presentation/ui/screens/developer/
rm app/src/main/java/com/adygyes/app/presentation/viewmodel/DeveloperViewModel.kt
```

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö Map —Ñ–∞–π–ª–æ–≤ (5 –º–∏–Ω—É—Ç)
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
grep -r "MapScreenReliable" app/src/main/java/
grep -r "MapScreenTablet" app/src/main/java/

# –ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è - —É–¥–∞–ª–∏—Ç—å
rm app/src/main/java/com/adygyes/app/presentation/ui/screens/map/MapScreenReliable.kt
rm app/src/main/java/com/adygyes/app/presentation/ui/screens/map/MapScreenTablet.kt
```

### 4Ô∏è‚É£ –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (10 –º–∏–Ω—É—Ç)
**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–¥–µ, –∑–∞—Ç–µ–º —É–¥–∞–ª–∏—Ç—å –∏–∑ `app/build.gradle.kts`:**

```kotlin
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å (–µ—Å–ª–∏ –Ω–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å–æ–≤):
// implementation(libs.retrofit.core)
// implementation(libs.retrofit.kotlinx.serialization)
// implementation(libs.okhttp)
// implementation(libs.okhttp.logging)

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
// implementation(libs.coil.svg)
// implementation(libs.accompanist.pager)
```

### 5Ô∏è‚É£ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ProGuard (7 –º–∏–Ω—É—Ç)
**–î–æ–±–∞–≤–∏—Ç—å –≤ `app/proguard-rules.pro`:**

```proguard
# –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
-optimizations !code/simplification/arithmetic,!code/simplification/cast,!field/*,!class/merging/*
-optimizationpasses 5
-allowaccessmodification
-repackageclasses ''
```

**–£–¥–∞–ª–∏—Ç—å –∏–∑ `proguard-rules.pro`:**
```proguard
# –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ 132-140 (Gson - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
```

---

## üéØ –ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### –°–µ–π—á–∞—Å:
1. ‚úÖ –ü—Ä–æ—á–∏—Ç–∞–ª –ø–ª–∞–Ω –≤ `Docs/APK_OPTIMIZATION_PLAN.md`
2. ‚¨ú **–ò–∑–º–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä APK** (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
3. ‚¨ú –í—ã–ø–æ–ª–Ω–∏—Ç—å **–≠—Ç–∞–ø 1** (10 –º–∏–Ω—É—Ç)
4. ‚¨ú Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –î–∞–ª–µ–µ (–ø–æ –æ–¥–Ω–æ–º—É —ç—Ç–∞–ø—É):
- ‚¨ú –≠—Ç–∞–ø 2: –ê–Ω–∞–ª–∏–∑ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞ (30 –º–∏–Ω)
- ‚¨ú –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (20 –º–∏–Ω)
- ‚¨ú –≠—Ç–∞–ø 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (30 –º–∏–Ω)
- ‚¨ú –≠—Ç–∞–ø 5: Build –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (15 –º–∏–Ω)
- ‚¨ú –≠—Ç–∞–ø 6: –û—á–∏—Å—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (5 –º–∏–Ω)
- ‚¨ú –≠—Ç–∞–ø 7: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (20 –º–∏–Ω)

---

## üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º:
```bash
# –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
git checkout -b optimization/apk-size

# –ò–ª–∏ —Å–¥–µ–ª–∞—Ç—å backup
git add .
git commit -m "Checkpoint before optimization"
```

### –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞:
```bash
# –¢–µ—Å—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
./gradlew clean assembleFullRelease

# –ï—Å–ª–∏ –≤—Å—ë –û–ö - commit
git add .
git commit -m "Optimization: Stage X completed"
```

---

## üìä –ö–ê–ö –ò–ó–ú–ï–†–ò–¢–¨ –†–ê–ó–ú–ï–† APK

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É
```bash
# –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏
ls -lh app/build/outputs/apk/full/release/*.apk
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Android Studio
1. Build > Build Bundle(s) / APK(s) > Build APK(s)
2. –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏: Build > Analyze APK...
3. –í—ã–±—Ä–∞—Ç—å `app-full-release.apk`
4. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–∑–º–µ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## ‚ö†Ô∏è –ß–¢–û –¢–û–ß–ù–û –ù–ï –¢–†–û–ì–ê–¢–¨

- ‚ùå `keystore.properties` –∏ `keystore/`
- ‚ùå Yandex MapKit –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚ùå Room, Hilt, Coroutines
- ‚ùå –ê–∫—Ç–∏–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã –∏ ViewModels
- ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ drawable

---

## üìû –ï–°–õ–ò –ß–¢–û-–¢–û –°–õ–û–ú–ê–õ–û–°–¨

1. –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π commit:
```bash
git reset --hard HEAD~1
```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–¥–∞–ª—ë–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–∑ git:
```bash
git checkout HEAD -- –ø—É—Ç—å/–∫/—Ñ–∞–π–ª—É
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ë–´–°–¢–†–û–ô –ü–†–û–í–ï–†–ö–ò

–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- [ ] –ö–∞—Ä—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –ú–∞—Ä–∫–µ—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- [ ] –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ò–∑–±—Ä–∞–Ω–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è

---

## üéâ –ù–ê–ß–ò–ù–ê–ï–ú!

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –û—Ç–∫—Ä–æ–π `Docs/APK_OPTIMIZATION_PLAN.md` –∏ –Ω–∞—á–Ω–∏ —Å –≠—Ç–∞–ø–∞ 1!

```bash
# –ò–∑–º–µ—Ä—å —Ç–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä
ls -lh app/build/outputs/apk/full/release/*.apk

# –ó–∞–ø–∏—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∑–∞—Ç–µ–º –Ω–∞—á–∏–Ω–∞–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é
```

–£–¥–∞—á–∏! üöÄ
