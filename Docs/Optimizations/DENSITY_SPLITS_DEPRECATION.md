# ‚ö†Ô∏è Density Splits - –£—Å—Ç–∞—Ä–µ–ª–∏ –≤ AGP 9.0

**–î–∞—Ç–∞**: 30.09.2025  
**–°—Ç–∞—Ç—É—Å**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üîî –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ –ø–æ—è–≤–∏–ª–æ—Å—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:
```
API 'splits.density' is obsolete. It will be removed in version 9.0 of the Android Gradle plugin.
Density-based apk split feature is deprecated and will be removed in AGP 9.0.
Use Android App Bundle (https://developer.android.com/guide/app-bundle) to generate optimized APKs.
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –£–¥–∞–ª–µ–Ω—ã Density Splits –∏–∑ build.gradle.kts

**–ë—ã–ª–æ**:
```kotlin
splits {
    abi { ... }
    density {
        isEnable = true
        reset()
        include("mdpi", "hdpi", "xhdpi", "xxhdpi", "xxxhdpi")
    }
}
```

**–°—Ç–∞–ª–æ**:
```kotlin
splits {
    // ABI splits - separate APKs for different CPU architectures
    abi {
        isEnable = true
        reset()
        include("arm64-v8a", "armeabi-v7a", "x86_64")
        isUniversalApk = true
    }
    
    // Density splits removed - deprecated in AGP 9.0
    // Use 'bundleFullRelease' to create AAB for Google Play
    // AAB automatically optimizes for different screen densities
}
```

---

## üì± –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥

### –í–º–µ—Å—Ç–æ Density Splits ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Android App Bundle (AAB)

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ AAB:

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**:
- Google Play –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ APK –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (ABI) –ò –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞ (density)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ —è–∑—ã–∫—É

‚úÖ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è**:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∫–∞—á–∏–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- –†–∞–∑–º–µ—Ä APK: ~3-5 MB –≤–º–µ—Å—Ç–æ 8-10 MB (—ç–∫–æ–Ω–æ–º–∏—è 50-60%)

‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è**:
- –û–¥–∏–Ω —Ñ–∞–π–ª AAB –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ APK
- Google Play —Å–∞–º —Å–æ–∑–¥–∞—ë—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AAB

### –°–±–æ—Ä–∫–∞ AAB:
```bash
./gradlew clean
./gradlew bundleFullRelease
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: `app/build/outputs/bundle/fullRelease/app-full-release.aab`

### –ü—É–±–ª–∏–∫–∞—Ü–∏—è:
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ AAB –≤ Google Play Console
2. Google Play –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ APK
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è —Å–≤–æ–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤

### –° Density Splits (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–µ—Ç–æ–¥):
| –í–∞—Ä–∏–∞–Ω—Ç | –†–∞–∑–º–µ—Ä |
|---------|--------|
| Full + arm64 + xxhdpi | ~4 MB |
| Full + arm64 + hdpi | ~3.5 MB |
| –ò—Ç–æ–≥–æ —Ñ–∞–π–ª–æ–≤ | 12+ APK (—Å–ª–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å) |

### –° AAB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –º–µ—Ç–æ–¥):
| –í–∞—Ä–∏–∞–Ω—Ç | –†–∞–∑–º–µ—Ä |
|---------|--------|
| AAB —Ñ–∞–π–ª | ~8 MB (–æ–¥–∏–Ω —Ñ–∞–π–ª) |
| **–ß—Ç–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** | **~3-5 MB** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ) |
| –ò—Ç–æ–≥–æ —Ñ–∞–π–ª–æ–≤ | 1 AAB (–ø—Ä–æ—Å—Ç–æ) |

---

## üîÑ –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### build.gradle.kts:
```kotlin
splits {
    // ‚úÖ ABI splits - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
    abi {
        isEnable = true
        include("arm64-v8a", "armeabi-v7a", "x86_64")
        isUniversalApk = true
    }
    
    // ‚ùå Density splits - —É–¥–∞–ª–µ–Ω—ã (—É—Å—Ç–∞—Ä–µ–ª–∏)
}
```

### –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ density:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ AAB: `./gradlew bundleFullRelease`

---

## üìù –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `app/build.gradle.kts` - —É–¥–∞–ª–µ–Ω—ã density splits
- ‚úÖ `BUILD_OPTIMIZED_APK.md` - –¥–æ–±–∞–≤–ª–µ–Ω –∞–∫—Ü–µ–Ω—Ç –Ω–∞ AAB
- ‚úÖ `Docs/Optimizations/README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚úÖ `OPTIMIZATION_PROGRESS.md` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –æ–∂–∏–¥–∞–µ–º—ã–µ —Ä–∞–∑–º–µ—Ä—ã

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ABI Splits —Ç–æ–ª—å–∫–æ:
- **Full + arm64**: ~5-6 MB (—ç–∫–æ–Ω–æ–º–∏—è ~35%)
- **Lite + arm64**: ~4-5 MB (—ç–∫–æ–Ω–æ–º–∏—è ~45%)

### AAB (ABI + Density –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è):
- **Full AAB**: ~3-5 MB –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—ç–∫–æ–Ω–æ–º–∏—è **50-60%**)
- **Lite AAB**: ~2.5-4 MB –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—ç–∫–æ–Ω–æ–º–∏—è **60-70%**)

---

## ‚úÖ –í—ã–≤–æ–¥—ã

1. **Density splits —É—Å—Ç–∞—Ä–µ–ª–∏** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –≤ –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
2. **ABI splits —Ä–∞–±–æ—Ç–∞—é—Ç** - –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
3. **AAB - –ª—É—á—à–∏–π –≤—ã–±–æ—Ä** –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Google Play:
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è —Ä–∞–∑–º–µ—Ä–∞
   - –ü—Ä–æ—Å—Ç–æ—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

4. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `bundleFullRelease` –¥–ª—è production —Å–±–æ—Ä–æ–∫

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 30.09.2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
