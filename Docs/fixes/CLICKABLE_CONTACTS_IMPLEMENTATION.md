# Кликабельная контактная информация - Реализация

## Обзор

Реализована система кликабельной контактной информации с минималистичным дизайном и плавными анимациями для приложения AdygGIS. Пользователи теперь могут легко взаимодействовать с контактными данными достопримечательностей.

## Компоненты

### 1. ClickableContactInfo.kt
**Основной компонент для отображения кликабельной контактной информации**

#### Функциональность:
- **Телефон**: Клик открывает приложение для звонков
- **Email**: Клик открывает почтовое приложение
- **Веб-сайт**: Клик открывает браузер
- **Социальные сети**: Клик пытается открыть нативное приложение, fallback на веб-версию
- **Долгое нажатие**: Копирует информацию в буфер обмена

#### Дизайн:
- Минималистичные карточки с цветными иконками
- Плавные анимации нажатия (scale 0.95f)
- Цветовая индикация по типу контакта
- Адаптивный размер (компактный/полный режим)
- Material 3 ripple эффекты

### 2. ContactActionUseCase.kt
**Use Case для обработки всех действий с контактной информацией**

#### Методы:
- `makePhoneCall()` - Открытие приложения для звонков
- `sendEmail()` - Открытие почтового клиента
- `openWebsite()` - Открытие браузера
- `openSocialMedia()` - Умное открытие социальных сетей
- `copyToClipboard()` - Копирование в буфер обмена
- `shareContact()` - Поделиться контактами

#### Особенности:
- Автоматическое добавление https:// к URL
- Попытка открытия нативных приложений для соцсетей
- Graceful fallback при ошибках
- Toast уведомления об ошибках

### 3. ContactActionViewModel.kt
**ViewModel для управления действиями с контактами**

Простая обертка над Use Case с интеграцией Hilt DI.

## Интеграция

### AttractionBottomSheet
```kotlin
// Контактная информация
attraction.contactInfo?.let { contactInfo ->
    InfoCard(
        icon = Icons.Default.ContactPhone,
        title = stringResource(R.string.detail_contact_info),
        content = {
            ClickableContactInfo(
                contactInfo = contactInfo,
                compact = true
            )
        }
    )
}
```

### AttractionDetailScreen
```kotlin
// Contact info card
attraction.contactInfo?.let { contact ->
    if (contact.phone != null || contact.email != null || contact.website != null) {
        InfoCard(
            icon = Icons.Default.ContactPhone,
            title = stringResource(R.string.detail_contact_info),
            content = {
                ClickableContactInfo(
                    contactInfo = contact,
                    compact = false
                )
            }
        )
    }
}
```

## Поддерживаемые социальные сети

### Нативная поддержка:
- **Instagram**: `instagram.com/_u/username`
- **Telegram**: `tg://resolve?domain=username`
- **VKontakte**: Нативное приложение VK
- **YouTube**: Нативное приложение YouTube

### Цветовая схема:
- **Instagram**: #E4405F (розовый)
- **Telegram**: #0088CC (синий)
- **VKontakte**: #4C75A3 (синий VK)
- **Facebook**: #1877F2 (синий Facebook)
- **YouTube**: #FF0000 (красный)

## UX особенности

### Анимации:
- **Scale анимация**: 0.95f при нажатии (100ms)
- **Color анимация**: Фон меняется на полупрозрачный цвет контакта
- **Ripple эффект**: Material 3 с цветом контакта

### Обратная связь:
- **Визуальная**: Анимации нажатия и цветовые изменения
- **Тактильная**: Системная вибрация при долгом нажатии
- **Звуковая**: Системные звуки при копировании

### Accessibility:
- Правильные contentDescription для всех иконок
- Поддержка TalkBack
- Достаточный размер touch target (минимум 48dp)

## Режимы отображения

### Компактный режим (compact = true):
- Высота элементов: 32dp иконки, 6dp padding
- Без подписей (только значения)
- Для использования в BottomSheet и карточках

### Полный режим (compact = false):
- Высота элементов: 40dp иконки, 8dp padding
- С подписями ("Телефон", "Email", etc.)
- Для использования в DetailScreen

## Обработка ошибок

### Graceful degradation:
- Если нативное приложение недоступно → веб-версия
- Если браузер недоступен → Toast с ошибкой
- Если буфер обмена недоступен → Toast с ошибкой

### Пользовательские сообщения:
- "Не удалось открыть приложение для звонков"
- "Не удалось открыть приложение для email"
- "Не удалось открыть веб-сайт"
- "Скопировано в буфер обмена"

## Производительность

### Оптимизации:
- Lazy loading иконок социальных сетей
- Кэширование цветов в Compose
- Минимальные recomposition через remember
- Эффективные анимации с tween(100ms)

### Память:
- Легковесные компоненты без тяжелых ресурсов
- Автоматическая очистка при dispose
- Нет утечек через правильное использование LocalContext

## Тестирование

### Проверенные сценарии:
- ✅ Клик по телефону открывает диалер
- ✅ Клик по email открывает почтовый клиент
- ✅ Клик по веб-сайту открывает браузер
- ✅ Долгое нажатие копирует в буфер обмена
- ✅ Анимации работают плавно
- ✅ Компактный и полный режимы отображаются корректно
- ✅ Обработка ошибок работает правильно

### Тестовые устройства:
- Android 8.0+ (API 26+)
- Различные размеры экранов
- Светлая и темная темы

## Будущие улучшения

### Возможные дополнения:
1. **Контекстное меню**: Долгое нажатие показывает меню с опциями
2. **Избранные контакты**: Сохранение часто используемых контактов
3. **История взаимодействий**: Отслеживание кликов для аналитики
4. **Кастомизация**: Настройка цветов и анимаций пользователем
5. **Больше соцсетей**: Поддержка TikTok, WhatsApp, Viber

### Технические улучшения:
1. **Предзагрузка**: Проверка доступности приложений заранее
2. **Кэширование**: Сохранение результатов проверки приложений
3. **Аналитика**: Отслеживание популярности типов контактов
4. **A/B тестирование**: Разные варианты дизайна

## Заключение

Реализована полнофункциональная система кликабельных контактов с современным дизайном, плавными анимациями и надежной обработкой ошибок. Система легко расширяема и интегрируется во все экраны приложения, значительно улучшая пользовательский опыт взаимодействия с контактной информацией достопримечательностей.
